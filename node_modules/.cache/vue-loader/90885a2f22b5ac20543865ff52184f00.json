{"remainingRequest":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\User\\Desktop\\ipdc-main-project\\src\\views\\CreatePlan.vue?vue&type=style&index=0&id=31764881&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\src\\views\\CreatePlan.vue","mtime":1582703113587},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\User\\Desktop\\ipdc-main-project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmhlYWQtY29udGFpbmVyIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VmZWZmNCAhaW1wb3J0YW50Ow0KICBwYWRkaW5nOiAwOw0KfQ0KDQouY29udGVudC1kaXYgew0KICBwYWRkaW5nOiAwOw0KfQ0KDQouY29udGVudC1oZWFkZXIgew0KICBmb250LXNpemU6IDE4cHg7DQogIGNvbG9yOiAjOGE4NDg0Ow0KfQ0KDQoudi1zdWJoZWFkZXIgew0KICBwYWRkaW5nOiAwOw0KfQ0KDQouZm9ybS1jbHN7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7DQogIHBhZGRpbmc6IDBweDsNCn0NCg0KLmZvcm0tcm93ew0KICBtYXJnaW46IDA7DQp9DQoNCi5jb2wtZmllbGR7DQogIHBhZGRpbmc6IDBweCAxMnB4Ow0KfQ0KDQoudi10ZXh0LWZpZWxkew0KICBwYWRkaW5nOiAwOw0KICBtYXJnaW4tYm90dG9tOiAtMjBweDsNCn0NCg0KLnNhdmUtYnRuew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjJiZWI1Ow0KICBjb2xvcjogI2ZmZjsNCiAgYm9yZGVyLXJhZGl1czogOHB4Ow0KICB3aWR0aDogMTQwcHg7DQogIGhlaWdodDogMzVweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICBkaXNwbGF5OiBibG9jazsNCiAgbWFyZ2luLWJvdHRvbTogMTJweDsNCiAgcGFkZGluZzogMCAhaW1wb3J0YW50Ow0KICBtYXJnaW46IDEycHggYXV0byA4cHg7DQp9DQppbnB1dCB7DQogICAgbWFyZ2luOiAwOw0KfQ0KaW5wdXQ6OnBsYWNlaG9sZGVyIHsNCiAgY29sb3I6ICM5ZTllOWU7DQp9DQoucG9wLXVwIHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgYmFja2dyb3VuZDogYW50aXF1ZXdoaXRlOw0KICAgIGJvcmRlcjogMnB4IHNvbGlkICNmMWQ1YWY7DQogICAgdG9wOiA2MHB4Ow0KICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQoudi1zaW1wbGUtdGFibGUgew0KICAgIG92ZXJmbG93OiBzY3JvbGw7DQogICAgaGVpZ2h0OiA1MDBweDsNCn0NCnRoIHsNCiAgICBmb250LXNpemU6IDE0cHggIWltcG9ydGFudDsNCiAgICBmb250LWZhbWlseTogUm9ib3RvJywgJ05vdG8nLCAnc2Fucy1zZXJpZiAhaW1wb3J0YW50Ow0KfQ0K"},{"version":3,"sources":["CreatePlan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreatePlan.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <v-ons-page class=\"create-plan-page\">\r\n    <div class=\"create-plan\">\r\n        <v-card-text class=\"pop-up\" v-if=\"createdPlanStatus\">{{ createdPlanStatus }}</v-card-text>\r\n        <v-simple-table class=\"v-simple-table\">\r\n            <template v-slot:default>\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-left\">Description</th>\r\n                        <th class=\"text-left\">Organization Type</th>\r\n                        <th class=\"text-left\">Reporting Frequency</th>\r\n                        <th class=\"text-left\">Parent</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"item in itemsMyOrganizations\" :key=\"item.id\" @click=\"myOrganizationSelection(item.id)\">\r\n                        <td v-if=\"item.organizationType == 1\">{{ item.description }}</td>\r\n                        <td v-if=\"item.organizationType == 1\">{{ item.organizationTypeDescription }}</td>\r\n                        <td v-if=\"item.organizationType == 1\">{{ item.reportingFrequencyDescription }}</td>\r\n                        <td v-if=\"item.organizationType == 1\">{{ item.parent.description }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </template>\r\n        </v-simple-table>\r\n        <v-container fluid>\r\n            <v-row align=\"center\">\r\n                <v-col>\r\n                    <v-select :items=\"reportingPeriods\" placeholder=\"Reporting Period\" dense  v-model=\"selectedReportingPeriods\" id=\"my_organizations\" name=\"my_organizations\" type=\"text\" class=\"reporting-period\"></v-select>\r\n                </v-col>\r\n            </v-row>\r\n        </v-container>\r\n        \r\n        <div style=\"margin: 0px 0px 30px; text-align: center;\">\r\n            <div style=\"margin: 5px 0\">\r\n                <v-card-text v-if=\"!this.selectedReportingPeriods\">Before you get the buttton select an option from dropdown</v-card-text>\r\n                <button class=\"waves-effect waves-light btn\" @click=\"createPlan\" v-if=\"this.selectedReportingPeriods\">Create Plan</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </v-ons-page>\r\n</template>\r\n\r\n<script>\r\nimport UnitPlanReportService from '../services/UnitPlanReportService'\r\nconst unitPlanReportService = new UnitPlanReportService();\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            selectedReportingPeriods: '',\r\n            itemsMyOrganizations: [],\r\n            reportingPeriods: [],\r\n            createPlanOrganizationReference: [],\r\n            createPlanOrgYear: null,\r\n            totalPlans: null,\r\n            createdPlanStatus: null\r\n        }\r\n    },\r\n    created() {\r\n        const accessToken = localStorage.getItem('access_token')\r\n        unitPlanReportService\r\n            .getMyOrganization(accessToken)\r\n            .then(res => {\r\n                this.itemsMyOrganizations = res.data;\r\n            })\r\n            .catch(err =>{\r\n                console.error(err);\r\n            });\r\n        \r\n        unitPlanReportService\r\n            .getSearchAllPage(accessToken)\r\n            .then(res => {\r\n                this.totalPlans = res.data.items.length\r\n                console.log('this.totalPlans ' + this.totalPlans)\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n            });\r\n    },\r\n    methods: {\r\n        myOrganizationSelection(id) {\r\n            let reportingPeriodsItems = [];\r\n            let orgYear = null;\r\n            console.log('my org ' + id);\r\n            const accessToken = localStorage.getItem('access_token')\r\n            unitPlanReportService\r\n                .getReportingPeriodsToCreatePlan(id, accessToken)\r\n                .then(res => {\r\n                    console.log(res)\r\n                    this.createPlanOrganizationReference = res.data[0].organizationReference;\r\n                    res.data.forEach(function(i){ \r\n                        let startDateParts = i.startDate.split('-')\r\n                        let endDateParts = i.endDate.split('-')\r\n                        let repF = ''\r\n                        if(i.reportingFrequency === 1) repF = 'Monthly'\r\n                        else if(i.reportingFrequency == 2) repF = 'EveryTwoMonth'\r\n                        else if(i.reportingFrequency == 3) repF = 'Quarterly'\r\n                        else if(i.reportingFrequency == 4) repF = 'EveryFourMonth'\r\n                        else if(i.reportingFrequency == 6) repF = 'HalfYearly'\r\n                        else if(i.reportingFrequency == 12) repF = 'Yearly'\r\n                        let startMonth = ''\r\n                        if(startDateParts[1] === '01') startMonth = 'Oct'\r\n                        else if(startDateParts[1] === '02') startMonth = 'Nov'\r\n                        else if(startDateParts[1] === '03') startMonth = 'Dec'\r\n                        else if(startDateParts[1] === '04') startMonth = 'Jan'\r\n                        else if(startDateParts[1] === '05') startMonth = 'Feb'\r\n                        else if(startDateParts[1] === '06') startMonth = 'Mar'\r\n                        else if(startDateParts[1] === '07') startMonth = 'Apr'\r\n                        else if(startDateParts[1] === '08') startMonth = 'May'\r\n                        else if(startDateParts[1] === '09') startMonth = 'Jun'\r\n                        else if(startDateParts[1] === '10') startMonth = 'Jul'\r\n                        else if(startDateParts[1] === '11') startMonth = 'Aug'\r\n                        else if(startDateParts[1] === '12') startMonth = 'Sep'\r\n                        let endMonth = ''\r\n                        if(endDateParts[1] === '01') endMonth = 'Oct'\r\n                        else if(endDateParts[1] === '02') endMonth = 'Nov'\r\n                        else if(endDateParts[1] === '03') endMonth = 'Dec'\r\n                        else if(endDateParts[1] === '04') endMonth = 'Jan'\r\n                        else if(endDateParts[1] === '05') endMonth = 'Feb'\r\n                        else if(endDateParts[1] === '06') endMonth = 'Mar'\r\n                        else if(endDateParts[1] === '07') endMonth = 'Apr'\r\n                        else if(endDateParts[1] === '08') endMonth = 'May'\r\n                        else if(endDateParts[1] === '09') endMonth = 'Jun'\r\n                        else if(endDateParts[1] === '10') endMonth = 'Jul'\r\n                        else if(endDateParts[1] === '11') endMonth = 'Aug'\r\n                        else if(endDateParts[1] === '12') endMonth = 'Sep'\r\n                        let isActive = ''\r\n                        if(i.isActive === true) isActive = ' (Active)'\r\n                        reportingPeriodsItems.push(i.year + '-' + repF + ' ' \r\n                                                + startMonth + ' ' + startDateParts[0] + ' to ' \r\n                                                + endMonth + ' ' + endDateParts[0] + isActive);\r\n                        orgYear = i.year;\r\n                    });\r\n                    this.createPlanOrgYear = orgYear;\r\n                })\r\n                .catch(err =>{\r\n                    console.error(err);\r\n                });\r\n            this.reportingPeriods = reportingPeriodsItems;\r\n        },\r\n        createPlan() {\r\n            console.log(this.createPlanOrganizationReference);\r\n            console.log(this.selectedReportingPeriods);\r\n            const orgReportingTerm = this.selectedReportingPeriods.split(' ')[0].split('-')[1];\r\n            const OrganizationReference = {\r\n                            organization:\r\n                                {\r\n                                    id: this.createPlanOrganizationReference.id,\r\n                                    organizationType: this.createPlanOrganizationReference.organizationType,\r\n                                    description: this.createPlanOrganizationReference.description,\r\n                                    reportingFrequency: this.createPlanOrganizationReference.reportingFrequency,\r\n                                    details: this.createPlanOrganizationReference.details\r\n                                },\r\n                            year: this.createPlanOrgYear,\r\n                            reportingTerm: this.reportingFrequencySelectionNumber(orgReportingTerm),\r\n                            reportingFrequency: this.createPlanOrganizationReference.reportingFrequency\r\n            };\r\n\r\n            const accessToken = localStorage.getItem('access_token')\r\n            unitPlanReportService\r\n                .createPlan(OrganizationReference, accessToken)\r\n                .then(res => {\r\n                    console.log(res);\r\n                    console.log(res.data);\r\n                    this.getAllPlans();\r\n                    var newPlans = this.totalPlans;\r\n                    var oldPlans = this.totalPlans;\r\n                    console.log(newPlans + ' ' + oldPlans)\r\n                    this.$router.push('/planandreports')\r\n                    window.location.reload();\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                });\r\n        },\r\n        reportingFrequencySelectionString(reportingFrequency) {\r\n            if(reportingFrequency == '1') return 'Monthly'\r\n            if(reportingFrequency == '2') return 'EveryTwoMonth'\r\n            if(reportingFrequency == '3') return 'Quarterly'\r\n            if(reportingFrequency == '4') return 'EveryFourMonth'\r\n            if(reportingFrequency == '6') return 'HalfYearly'\r\n            if(reportingFrequency == '12') return 'Yearly'\r\n        },\r\n        reportingFrequencySelectionNumber(reportingFrequency) {\r\n            if(reportingFrequency == 'Monthly') return 1\r\n            if(reportingFrequency == 'EveryTwoMonth') return 2\r\n            if(reportingFrequency == 'Quarterly') return 3\r\n            if(reportingFrequency == 'EveryFourMonth') return 4\r\n            if(reportingFrequency == 'HalfYearly') return 6\r\n            if(reportingFrequency == 'Yearly') return 12\r\n        },\r\n        reportingTermSelection(reportingTerm) {\r\n            if(reportingTerm == '1') return 'Oct'\r\n            if(reportingTerm == '2') return 'Nov'\r\n            if(reportingTerm == '3') return 'Dec'\r\n            if(reportingTerm == '4') return 'Jan'\r\n            if(reportingTerm == '5') return 'Feb'\r\n            if(reportingTerm == '6') return 'Mar'\r\n            if(reportingTerm == '7') return 'Apr'\r\n            if(reportingTerm == '8') return 'May'\r\n            if(reportingTerm == '9') return 'Jun'\r\n            if(reportingTerm == '10') return 'Jul'\r\n            if(reportingTerm == '11') return 'Aug'\r\n            if(reportingTerm == '12') return 'Sep'\r\n        },\r\n        getAllPlans() {\r\n            let plans = null\r\n            const accessToken = localStorage.getItem('access_token')\r\n            unitPlanReportService\r\n                .getSearchAllPage(accessToken)\r\n                .then(res => {\r\n                    plans = res.data.items.length\r\n                    console.log('Plans           ' + plans)\r\n                    console.log('this.totalPlans ' + this.totalPlans)\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                });\r\n            return plans\r\n        },\r\n        hidePlanCreationStatus() {\r\n            setTimeout( () => {\r\n                this.createdPlanStatus = null \r\n            }, 2000);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.head-container {\r\n  background-color: #efeff4 !important;\r\n  padding: 0;\r\n}\r\n\r\n.content-div {\r\n  padding: 0;\r\n}\r\n\r\n.content-header {\r\n  font-size: 18px;\r\n  color: #8a8484;\r\n}\r\n\r\n.v-subheader {\r\n  padding: 0;\r\n}\r\n\r\n.form-cls{\r\n  background-color: #ffffff;\r\n  padding: 0px;\r\n}\r\n\r\n.form-row{\r\n  margin: 0;\r\n}\r\n\r\n.col-field{\r\n  padding: 0px 12px;\r\n}\r\n\r\n.v-text-field{\r\n  padding: 0;\r\n  margin-bottom: -20px;\r\n}\r\n\r\n.save-btn{\r\n  background-color: #b2beb5;\r\n  color: #fff;\r\n  border-radius: 8px;\r\n  width: 140px;\r\n  height: 35px;\r\n  text-align: center;\r\n  display: block;\r\n  margin-bottom: 12px;\r\n  padding: 0 !important;\r\n  margin: 12px auto 8px;\r\n}\r\ninput {\r\n    margin: 0;\r\n}\r\ninput::placeholder {\r\n  color: #9e9e9e;\r\n}\r\n.pop-up {\r\n    position: fixed;\r\n    background: antiquewhite;\r\n    border: 2px solid #f1d5af;\r\n    top: 60px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    text-align: center;\r\n}\r\n.v-simple-table {\r\n    overflow: scroll;\r\n    height: 500px;\r\n}\r\nth {\r\n    font-size: 14px !important;\r\n    font-family: Roboto', 'Noto', 'sans-serif !important;\r\n}\r\n</style>"]}]}